version: "3.8"
services:
api:
build:
context: .
dockerfile: ./docker/api.Dockerfile
ports: ["8080:8080"]
environment:
- GOOGLE_API_KEY=${GOOGLE_API_KEY}
- GEMINI_MODEL=gemini-1.5-pro-latest
- GEMINI_EMBEDDING_MODEL=text-embedding-004
- GROBID_URL=http://grobid:8070
- QDRANT_URL=http://qdrant:6333
- EMBEDDING_DIM=768
- DATA_DIR=/app/data
- PROMPTS_DIR=/app/prompts
volumes:
- ./data:/app/data
- ./shared/lib/prompts:/app/prompts:ro
depends_on: [grobid, qdrant]
web:
build:
context: ./web
ports: ["3000:3000"]
environment:
- NEXT_PUBLIC_API_BASE_URL=http://api:8080
depends_on: [api]



grobid:
image: grobid/grobid:latest
ports: ["8070:8070"]
environment:
- GROBID_CORS_ENABLE=true
- GROBID_MAX_CONNECTIONS=2


qdrant:
image: qdrant/qdrant:latest
ports: ["6333:6333"]
volumes:
- qdrant_data:/qdrant/storage


volumes:
qdrant_data: